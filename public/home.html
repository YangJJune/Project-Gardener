<!--기본 레이아웃 디자인-->

<html>
  <head>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.rawgit.com/oauth-io/oauth-js/c5af4519/dist/oauth.js"></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.12.0/bootstrap-social.min.css"
    />

    <title>Project : Gardener</title>
  </head>
  <body>
    <nav id="upper_navigation">
      <header id="main_title">
        <h1>Project : Gardener</h1>
      </header>
      <section id="navigation_section">
        <button>정원</button>
        <button>식물</button>
        <button>친구</button>
      </section>
    </nav>

    <section id="upper_contents"></section>

    <section id="lower_contents"></section>

    <footer>
      <h3>제작 : team 불사조</h3>
    </footer>
  </body>

  <script>
    //We can get the token from the "access_token" query
    //param, available in the browsers "location" global
    const query = window.location.search.substring(1);
    console.log('query: ' + query);
    const token = query.split('access_token=')[1];
    console.log('token: ' + token);

    //Call the user info API using the fetch browser library
    fetch('https://api.github.com/user', {
      headers: {
        //Include the token in the Authorization header
        Authorization: 'token ' + token,
      },
    })
      //Parse the response as JSON
      .then((res) => res.json())
      .then((res) => {
        //Once we get the respone(which has many fields)
        //Documented here: https://developer.github.com/v3/users/#get-the-authenticated-user
        //Write "Welcome <user name>" to the documents body
        console.log(res);
        const nameNode = document.createTextNode(`Welcome, ${res.name}`);
        document.body.appendChild(nameNode);
      });
  </script>
</html>
